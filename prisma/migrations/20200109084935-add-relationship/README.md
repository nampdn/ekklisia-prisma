# Migration `20200109084935-add-relationship`

This migration has been generated by nampdn at 1/9/2020, 8:49:35 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."_GroupMembers" (
  "A" text  NOT NULL  REFERENCES "public"."Group"("id") ON DELETE CASCADE,
  "B" text  NOT NULL  REFERENCES "public"."Profile"("id") ON DELETE CASCADE
);

ALTER TABLE "public"."Profile" DROP COLUMN "group";

CREATE UNIQUE INDEX "_GroupMembers_AB_unique" ON "public"."_GroupMembers"("A","B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200109050804..20200109084935-add-relationship
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Post {
   id        String   @default(cuid()) @id
@@ -26,13 +26,13 @@
   profile  Profile? @relation(name: "UserProfile")
 }
 model Profile {
-  id           String    @default(cuid()) @id
+  id           String       @default(cuid()) @id
   fullName     String
   gender       String?
-  oldId        String?   @unique
-  slug         String?   @unique
+  oldId        String?      @unique
+  slug         String?      @unique
   email        String?
   facebookId   String?
   phoneNumber  String?
   birthday     DateTime?
@@ -40,10 +40,13 @@
   dayOfBirth   Int?
   monthOfBirth Int?
   yearOfBirth  Int?
   org          Org?
-  createdAt    DateTime  @default(now())
-  updatedAt    DateTime  @updatedAt
+  createdAt    DateTime     @default(now())
+  updatedAt    DateTime     @updatedAt
+  leader       Group[]      @relation(name: "GroupLeader")
+  member       Group[]      @relation(name: "GroupMembers")
+  attendances  Attendance[] @relation(name: "AttendanceProfile")
 }
 model Group {
   id        String    @default(cuid()) @id
```


