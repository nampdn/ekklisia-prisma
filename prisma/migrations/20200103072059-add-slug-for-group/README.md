# Migration `20200103072059-add-slug-for-group`

This migration has been generated by nampdn at 1/3/2020, 7:20:59 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "ekklisia"."Profile" ADD COLUMN "slug" text    ;

ALTER TABLE "ekklisia"."Group" ADD COLUMN "slug" text  NOT NULL DEFAULT '' ;

CREATE UNIQUE INDEX "Profile.oldId" ON "ekklisia"."Profile"("oldId")

CREATE UNIQUE INDEX "Profile.slug" ON "ekklisia"."Profile"("slug")

CREATE UNIQUE INDEX "Group.slug" ON "ekklisia"."Group"("slug")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200103053223-add-group..20200103072059-add-slug-for-group
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Post {
   id        String   @default(cuid()) @id
@@ -29,9 +29,10 @@
 model Profile {
   id           String    @default(cuid()) @id
   fullName     String
   gender       Boolean
-  oldId        String?
+  oldId        String?   @unique
+  slug         String?   @unique
   email        String?
   facebookId   String?
   phoneNumber  String?
   birthday     DateTime?
@@ -43,8 +44,9 @@
 model Group {
   id      String    @default(cuid()) @id
   name    String
+  slug    String    @unique
   year    Int?
   leader  Profile?  @relation(name: "GroupLeader")
   members Profile[] @relation(name: "GroupMembers")
 }
```


